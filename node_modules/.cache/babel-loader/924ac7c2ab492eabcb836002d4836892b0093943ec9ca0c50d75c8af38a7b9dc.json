{"ast":null,"code":"import axios from\"axios\";const API_URL=(process.env.REACT_APP_API_BASE_URL||\"http://localhost:5001\")+\"/api/v1\";export const getFavorites=async userId=>{const res=await axios.get(\"\".concat(API_URL,\"/favorites/\").concat(userId));return res.data;};export const updateFavorites=async(userId,favorites)=>{const res=await axios.put(\"\".concat(API_URL,\"/favorites\"),{_id:userId,favorites});return res.data;};export const getFavoriteMovies=async userId=>{try{console.log('Getting favorite movies for user:',userId);// First get the user's favorite movie IDs\nconst favoritesData=await getFavorites(userId);console.log('Favorites data:',favoritesData);const favoriteIds=favoritesData.favorites||[];if(favoriteIds.length===0){console.log('No favorite movies found');return[];}console.log('Favorite movie IDs:',favoriteIds);// Then get the full movie details for each favorite\nconst moviePromises=favoriteIds.map(async movieId=>{try{console.log('Fetching movie details for:',movieId);const res=await axios.get(\"\".concat(API_URL,\"/movies/id/\").concat(movieId));console.log('Movie details received for:',movieId,res.data.title);return res.data;}catch(error){console.error(\"Error fetching movie \".concat(movieId,\":\"),error);return null;}});const movies=await Promise.all(moviePromises);const validMovies=movies.filter(movie=>movie!==null);console.log('Final movies array:',validMovies.map(m=>m.title));return validMovies;}catch(error){console.error('Error fetching favorite movies:',error);return[];}};","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_BASE_URL","getFavorites","userId","res","get","concat","data","updateFavorites","favorites","put","_id","getFavoriteMovies","console","log","favoritesData","favoriteIds","length","moviePromises","map","movieId","title","error","movies","Promise","all","validMovies","filter","movie","m"],"sources":["/Users/tenmoutheshark/Desktop/mern-stack-project-backend-Tenmou-Vi/frontend/src/services/favorites.js"],"sourcesContent":["import axios from \"axios\";\nconst API_URL = (process.env.REACT_APP_API_BASE_URL || \"http://localhost:5001\") + \"/api/v1\";\n\nexport const getFavorites = async (userId) => {\n  const res = await axios.get(`${API_URL}/favorites/${userId}`);\n  return res.data;\n};\n\nexport const updateFavorites = async (userId, favorites) => {\n  const res = await axios.put(`${API_URL}/favorites`, {\n    _id: userId,\n    favorites,\n  });\n  return res.data;\n};\n\nexport const getFavoriteMovies = async (userId) => {\n  try {\n    console.log('Getting favorite movies for user:', userId);\n    // First get the user's favorite movie IDs\n    const favoritesData = await getFavorites(userId);\n    console.log('Favorites data:', favoritesData);\n    const favoriteIds = favoritesData.favorites || [];\n\n    if (favoriteIds.length === 0) {\n      console.log('No favorite movies found');\n      return [];\n    }\n\n    console.log('Favorite movie IDs:', favoriteIds);\n\n    // Then get the full movie details for each favorite\n    const moviePromises = favoriteIds.map(async (movieId) => {\n      try {\n        console.log('Fetching movie details for:', movieId);\n        const res = await axios.get(`${API_URL}/movies/id/${movieId}`);\n        console.log('Movie details received for:', movieId, res.data.title);\n        return res.data;\n      } catch (error) {\n        console.error(`Error fetching movie ${movieId}:`, error);\n        return null;\n      }\n    });\n\n    const movies = await Promise.all(moviePromises);\n    const validMovies = movies.filter(movie => movie !== null);\n    console.log('Final movies array:', validMovies.map(m => m.title));\n    return validMovies;\n  } catch (error) {\n    console.error('Error fetching favorite movies:', error);\n    return [];\n  }\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,KAAM,CAAAC,OAAO,CAAG,CAACC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,uBAAuB,EAAI,SAAS,CAE3F,MAAO,MAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,MAAM,EAAK,CAC5C,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAP,KAAK,CAACQ,GAAG,IAAAC,MAAA,CAAIR,OAAO,gBAAAQ,MAAA,CAAcH,MAAM,CAAE,CAAC,CAC7D,MAAO,CAAAC,GAAG,CAACG,IAAI,CACjB,CAAC,CAED,MAAO,MAAM,CAAAC,eAAe,CAAG,KAAAA,CAAOL,MAAM,CAAEM,SAAS,GAAK,CAC1D,KAAM,CAAAL,GAAG,CAAG,KAAM,CAAAP,KAAK,CAACa,GAAG,IAAAJ,MAAA,CAAIR,OAAO,eAAc,CAClDa,GAAG,CAAER,MAAM,CACXM,SACF,CAAC,CAAC,CACF,MAAO,CAAAL,GAAG,CAACG,IAAI,CACjB,CAAC,CAED,MAAO,MAAM,CAAAK,iBAAiB,CAAG,KAAO,CAAAT,MAAM,EAAK,CACjD,GAAI,CACFU,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAEX,MAAM,CAAC,CACxD;AACA,KAAM,CAAAY,aAAa,CAAG,KAAM,CAAAb,YAAY,CAACC,MAAM,CAAC,CAChDU,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEC,aAAa,CAAC,CAC7C,KAAM,CAAAC,WAAW,CAAGD,aAAa,CAACN,SAAS,EAAI,EAAE,CAEjD,GAAIO,WAAW,CAACC,MAAM,GAAK,CAAC,CAAE,CAC5BJ,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvC,MAAO,EAAE,CACX,CAEAD,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEE,WAAW,CAAC,CAE/C;AACA,KAAM,CAAAE,aAAa,CAAGF,WAAW,CAACG,GAAG,CAAC,KAAO,CAAAC,OAAO,EAAK,CACvD,GAAI,CACFP,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEM,OAAO,CAAC,CACnD,KAAM,CAAAhB,GAAG,CAAG,KAAM,CAAAP,KAAK,CAACQ,GAAG,IAAAC,MAAA,CAAIR,OAAO,gBAAAQ,MAAA,CAAcc,OAAO,CAAE,CAAC,CAC9DP,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEM,OAAO,CAAEhB,GAAG,CAACG,IAAI,CAACc,KAAK,CAAC,CACnE,MAAO,CAAAjB,GAAG,CAACG,IAAI,CACjB,CAAE,MAAOe,KAAK,CAAE,CACdT,OAAO,CAACS,KAAK,yBAAAhB,MAAA,CAAyBc,OAAO,MAAKE,KAAK,CAAC,CACxD,MAAO,KAAI,CACb,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAACP,aAAa,CAAC,CAC/C,KAAM,CAAAQ,WAAW,CAAGH,MAAM,CAACI,MAAM,CAACC,KAAK,EAAIA,KAAK,GAAK,IAAI,CAAC,CAC1Df,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEY,WAAW,CAACP,GAAG,CAACU,CAAC,EAAIA,CAAC,CAACR,KAAK,CAAC,CAAC,CACjE,MAAO,CAAAK,WAAW,CACpB,CAAE,MAAOJ,KAAK,CAAE,CACdT,OAAO,CAACS,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvD,MAAO,EAAE,CACX,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}