{"ast":null,"code":"import axios from \"axios\";\nconst API_URL = (process.env.REACT_APP_API_BASE_URL || \"http://localhost:5001\") + \"/api/v1\";\nexport const getFavorites = async userId => {\n  console.log(\"üîç [getFavorites] Getting favorites for user:\", userId);\n  console.log(\"üîç [getFavorites] API URL:\", `${API_URL}/favorites/${userId}`);\n  const res = await axios.get(`${API_URL}/favorites/${userId}`);\n  console.log(\"üîç [getFavorites] Response:\", res.data);\n  return res.data;\n};\nexport const updateFavorites = async (userId, favorites) => {\n  const res = await axios.put(`${API_URL}/favorites`, {\n    userId: userId,\n    favorites\n  });\n  return res.data;\n};\nexport const getFavoriteMovies = async userId => {\n  try {\n    console.log(\"üîç [getFavoriteMovies] Starting for user:\", userId);\n\n    // First get the user's favorite movie IDs\n    const favoritesData = await getFavorites(userId);\n    const favoriteIds = favoritesData.favorites || [];\n    console.log(\"üîç [getFavoriteMovies] Got favorite IDs:\", favoriteIds);\n    if (favoriteIds.length === 0) {\n      console.log(\"üîç [getFavoriteMovies] No favorites found\");\n      return [];\n    }\n\n    // Then get the full movie details for each favorite\n    const moviePromises = favoriteIds.map(async movieId => {\n      try {\n        console.log(\"üîç [getFavoriteMovies] Fetching movie:\", movieId);\n        const res = await axios.get(`${API_URL}/movies/id/${movieId}`);\n        console.log(\"üîç [getFavoriteMovies] Movie data:\", res.data);\n        return res.data;\n      } catch (error) {\n        console.error(`‚ùå Error fetching movie ${movieId}:`, error);\n        return null;\n      }\n    });\n    const movies = await Promise.all(moviePromises);\n    const validMovies = movies.filter(movie => movie !== null);\n    console.log(\"üîç [getFavoriteMovies] Final movies:\", validMovies);\n    return validMovies;\n  } catch (error) {\n    console.error('‚ùå Error fetching favorite movies:', error);\n    return [];\n  }\n};","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_BASE_URL","getFavorites","userId","console","log","res","get","data","updateFavorites","favorites","put","getFavoriteMovies","favoritesData","favoriteIds","length","moviePromises","map","movieId","error","movies","Promise","all","validMovies","filter","movie"],"sources":["/Users/tenmoutheshark/Desktop/mern-stack-project-backend-Tenmou-Vi/frontend/src/services/favorites.js"],"sourcesContent":["import axios from \"axios\";\nconst API_URL = (process.env.REACT_APP_API_BASE_URL || \"http://localhost:5001\") + \"/api/v1\";\n\nexport const getFavorites = async (userId) => {\n  console.log(\"üîç [getFavorites] Getting favorites for user:\", userId);\n  console.log(\"üîç [getFavorites] API URL:\", `${API_URL}/favorites/${userId}`);\n  const res = await axios.get(`${API_URL}/favorites/${userId}`);\n  console.log(\"üîç [getFavorites] Response:\", res.data);\n  return res.data;\n};\n\nexport const updateFavorites = async (userId, favorites) => {\n  const res = await axios.put(`${API_URL}/favorites`, {\n    userId: userId,\n    favorites,\n  });\n  return res.data;\n};\n\nexport const getFavoriteMovies = async (userId) => {\n  try {\n    console.log(\"üîç [getFavoriteMovies] Starting for user:\", userId);\n    \n    // First get the user's favorite movie IDs\n    const favoritesData = await getFavorites(userId);\n    const favoriteIds = favoritesData.favorites || [];\n    \n    console.log(\"üîç [getFavoriteMovies] Got favorite IDs:\", favoriteIds);\n    \n    if (favoriteIds.length === 0) {\n      console.log(\"üîç [getFavoriteMovies] No favorites found\");\n      return [];\n    }\n    \n    // Then get the full movie details for each favorite\n    const moviePromises = favoriteIds.map(async (movieId) => {\n      try {\n        console.log(\"üîç [getFavoriteMovies] Fetching movie:\", movieId);\n        const res = await axios.get(`${API_URL}/movies/id/${movieId}`);\n        console.log(\"üîç [getFavoriteMovies] Movie data:\", res.data);\n        return res.data;\n      } catch (error) {\n        console.error(`‚ùå Error fetching movie ${movieId}:`, error);\n        return null;\n      }\n    });\n    \n    const movies = await Promise.all(moviePromises);\n    const validMovies = movies.filter(movie => movie !== null);\n    console.log(\"üîç [getFavoriteMovies] Final movies:\", validMovies);\n    return validMovies;\n  } catch (error) {\n    console.error('‚ùå Error fetching favorite movies:', error);\n    return [];\n  }\n}; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,MAAMC,OAAO,GAAG,CAACC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,uBAAuB,IAAI,SAAS;AAE3F,OAAO,MAAMC,YAAY,GAAG,MAAOC,MAAM,IAAK;EAC5CC,OAAO,CAACC,GAAG,CAAC,+CAA+C,EAAEF,MAAM,CAAC;EACpEC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE,GAAGP,OAAO,cAAcK,MAAM,EAAE,CAAC;EAC3E,MAAMG,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAC,GAAGT,OAAO,cAAcK,MAAM,EAAE,CAAC;EAC7DC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEC,GAAG,CAACE,IAAI,CAAC;EACpD,OAAOF,GAAG,CAACE,IAAI;AACjB,CAAC;AAED,OAAO,MAAMC,eAAe,GAAG,MAAAA,CAAON,MAAM,EAAEO,SAAS,KAAK;EAC1D,MAAMJ,GAAG,GAAG,MAAMT,KAAK,CAACc,GAAG,CAAC,GAAGb,OAAO,YAAY,EAAE;IAClDK,MAAM,EAAEA,MAAM;IACdO;EACF,CAAC,CAAC;EACF,OAAOJ,GAAG,CAACE,IAAI;AACjB,CAAC;AAED,OAAO,MAAMI,iBAAiB,GAAG,MAAOT,MAAM,IAAK;EACjD,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAEF,MAAM,CAAC;;IAEhE;IACA,MAAMU,aAAa,GAAG,MAAMX,YAAY,CAACC,MAAM,CAAC;IAChD,MAAMW,WAAW,GAAGD,aAAa,CAACH,SAAS,IAAI,EAAE;IAEjDN,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAES,WAAW,CAAC;IAEpE,IAAIA,WAAW,CAACC,MAAM,KAAK,CAAC,EAAE;MAC5BX,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;MACxD,OAAO,EAAE;IACX;;IAEA;IACA,MAAMW,aAAa,GAAGF,WAAW,CAACG,GAAG,CAAC,MAAOC,OAAO,IAAK;MACvD,IAAI;QACFd,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAEa,OAAO,CAAC;QAC9D,MAAMZ,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAC,GAAGT,OAAO,cAAcoB,OAAO,EAAE,CAAC;QAC9Dd,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEC,GAAG,CAACE,IAAI,CAAC;QAC3D,OAAOF,GAAG,CAACE,IAAI;MACjB,CAAC,CAAC,OAAOW,KAAK,EAAE;QACdf,OAAO,CAACe,KAAK,CAAC,0BAA0BD,OAAO,GAAG,EAAEC,KAAK,CAAC;QAC1D,OAAO,IAAI;MACb;IACF,CAAC,CAAC;IAEF,MAAMC,MAAM,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,aAAa,CAAC;IAC/C,MAAMO,WAAW,GAAGH,MAAM,CAACI,MAAM,CAACC,KAAK,IAAIA,KAAK,KAAK,IAAI,CAAC;IAC1DrB,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEkB,WAAW,CAAC;IAChE,OAAOA,WAAW;EACpB,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdf,OAAO,CAACe,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IACzD,OAAO,EAAE;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}